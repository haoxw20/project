$(".bar input:first").focus(function(){$(".history").css("display","block")}),$(".bar input:first").blur(function(){$(".history").css("display","none")}),$(".side ul li").click(function(){$(".side").animate({right:0},200)}),$(".side h2 span").click(function(){$(".side").animate({right:-300},200)}),$(".backtop").click(function(){$("body,html").animate({scrollTop:0},300)}),function(){function o(i){return i?JSON.parse(i):{}}o($.cookie("shop")?$.cookie("shop"):""),$("section .center p a:eq(0)").click(function(){var i=$(this).parent().prev().attr("id"),e=$(this).parent().prev().children().first().text(),n=parseInt($(this).parent().prev().children().children().last().text()),t=o($.cookie("shop")?$.cookie("shop"):"");i in t?t[i].num++:t[i]={name:e,price:n,num:1},$.cookie("shop",JSON.stringify(t),{expires:7,path:"/"})})}(),function(p){var v={magnifier:".magnifier",container:".magnifier-container",containerImg:".images-cover",view:".magnifier-view",width:400,height:400,moveView:".move-view",moveWidth:null,zoom:4,thumbnail:".magnifier-line > ul",assembly:".magnifier-btn",index:0};window.magnifier=function(i){if("object"==typeof i)for(var e in i)v[e]=i[e];var o=this;o.magnifier=p(v.magnifier),o.container=o.magnifier.find(v.container),o.view=o.magnifier.find(v.view),o.moveView=o.magnifier.find(v.moveView),o.thumbnail=o.magnifier.find(v.thumbnail),o.assembly=o.magnifier.find(v.assembly),o.containerImg=o.magnifier.find(v.containerImg);var h,a,d,r,s,c,m,f,g,l=o.containerImg;o.magnifier.css({width:v.width}),o.container.css({width:v.width,height:v.height}),o.view.css({width:v.width,height:v.height}),h=v.moveWidth?v.moveWidth:v.width/v.zoom,a=h,o.moveView.css({width:h,height:a}),o.eqImg=function(){var n=new Image,t=o.thumbnail.find("img").eq(v.index).attr("src");n.src=t,containerWidth=v.width,containerHeight=v.height,o.thumbnail.find(">*").removeClass("active").eq(v.index).addClass("active"),function i(){var e;0==n.width&&(n.onload=i),e=n.width>n.height?(m=v.width,"top:50%;margin-top:"+-(f=n.height/(n.width/v.width))/2+"px"):(m=n.width/(n.height/v.width),f=v.width,"left:50%;margin-left:"+-m/2+"px"),l.empty().append('<img src="'+t+'" width="'+m+'" height="'+f+'" style="'+e+'" />'),g=v.width/h,o.view.empty().append('<img src="'+t+'" width="'+m*g+'" height="'+f*g+'" />'),d=(v.width-m)/2,r=v.width-d-h+1,s=(v.height-f)/2,c=v.height-s-a+1}()},o.eqImg(),o.moveFn=function(i){var e=i.clientX-o.magnifier.offset().left-h/2,n=i.clientY-o.magnifier.offset().top+p(document).scrollTop()-a/2;endX=d<e?e<r?e:r:d,endY=s<n?n<c?n:c:s,endY=0<endY?endY>v.width-a?v.height-a:endY:0,o.moveView.css({left:endX,top:endY,display:"block"}),positionX=(endX-(v.width-m)/2)*g,positionY=(endY-(v.height-f)/2)*g,o.view.css({display:"block"}).find("img").css({"margin-left":-positionX,"margin-top":-positionY})},o.container.on("mousemove",function(i){o.moveFn(i)}).on("mouseleave",function(){o.moveView.hide(),o.view.hide()});var t=o.thumbnail.find(">*"),w=t.length;return o.imgMove=function(i){i?v.index++:v.index--;var e=Math.ceil(v.width/t.width()/2);if(w<e)return!1;v.index<0?v.index=0:v.index>w-e?v.index=w-e:v.index;var n=t.width()*v.index-t.width();o.thumbnail.css({left:(0<n?-n:0)+"px"})},t.on("mouseenter",function(){v.index=p(this).index(),o.eqImg(),o.imgMove(v.index)}),o.setIndex=function(i){v.index=i||0},o}}(jQuery);